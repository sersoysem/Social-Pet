<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Evcil Hayvan Profilini Oluştur</title>
  <link rel="icon" type="image/x-icon" href="images/turuncu-pati.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path fill='%23FF6B35' d='M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z'/></svg>">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
      background-image: url('/static/images/agac2.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    .container {
      position: relative;
      z-index: 1;
      display: flex;
      flex-wrap: wrap;
      max-width: 1200px;
      margin: 40px auto;
      background: rgba(255, 255, 255, 0.762);
      border-radius: 16px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.15);
      overflow: hidden;
    }

    .left {
      background: rgba(221, 134, 103, 0.215);
      flex: 1 1 300px;
      padding: 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      position: relative;
    }

    .left img.pet-illustration {
      width: 220px;
      margin-bottom: 20px;
      position: relative;
      z-index: 2;
    }

    .left img.design-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      object-fit: contain;
      z-index: 1;
      opacity: 0.8;
    }

    .left h2 {
      position: relative;
      z-index: 2;
    }
    .top-offset {
      top: calc(50% - 400px) !important; /* 125px yukarı kaydır */
    }


    .right {
      flex: 2 1 600px;
      padding: 40px 32px;
    }

    h1 {
      color: #FF6B35;
      font-size: 1.8rem;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      color: #FF6B35;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1.5px solid #ccc;
      font-size: 1rem;
      transition: 0.3s;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #4CAF50;
      outline: none;
    }

    .form-row {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .form-row .form-group {
      flex: 1 1 0;
      min-width: 0;
      margin-bottom: 0;
    }

    .interests {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .interest {
      padding: 6px 12px;
      border-radius: 20px;
      border: 1px solid #FF6B35;
      background: #FFF3E6;
      color: #FF6B35;
      font-size: 0.9rem;
      cursor: pointer;
      user-select: none;
    }

    .interest:hover, .interest.selected {
      background: #4CAF50;
      border-color: rgb(77, 173, 80);
      color: white;
    }

    .custom-interest {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      align-items: center;
    }

    .custom-interest input {
      flex: 1;
      padding: 6px 12px;
      border-radius: 20px;
      border: 1.5px solid #FF6B35;
      font-size: 0.9rem;
    }

    .custom-interest button {
      padding: 6px 12px;
      border-radius: 20px;
      border: 1.5px solid #FF6B35;
      background: #FF6B35;
      color: white;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .custom-interest button:hover {
      background: #3d8b40;
      border-color: rgb(77, 173, 80);
    }

    .photo-upload-section {
      margin-top: 32px;
    }

    .photo-grid {
      display: grid;
      grid-template-columns: repeat(4, 110px);
      gap: 18px;
      justify-content: start;
    }

    .photo-slot {
      width: 110px;
      height: 110px;
      background: #FFF3E6;
      border: 2px dashed #FF6B35;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      cursor: pointer;
      overflow: hidden;
      transition: border 0.2s, background 0.2s;
    }

    .photo-slot:hover {
      border: 2px solid #FF6B35;
      background: #FFE3D1;
    }

    .photo-slot input[type="file"] {
      display: none;
    }

    .photo-slot img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 16px;
    }

    .add-photo-btn {
      color: #FF6B35;
      font-size: 2.2rem;
      background: none;
      border: none;
      cursor: pointer;
      transition: color 0.2s;
    }

    .add-photo-btn:hover {
      color: #4CAF50;
    }

    .remove-photo-btn {
      position: absolute;
      top: 6px;
      right: 6px;
      background: rgba(255,255,255,0.85);
      border: none;
      border-radius: 50%;
      color: #FF6B35;
      font-size: 1.2rem;
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 2;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: background 0.2s, color 0.2s;
    }

    .remove-photo-btn:hover {
      background: #FF6B35;
      color: #fff;
    }

    .photo-info {
      font-size: 0.9rem;
      color: #555;
      margin-top: 10px;
      margin-bottom: 0;
    }

    .submit-btn {
      margin-top: 24px;
      background: #FF6B35;
      color: white;
      padding: 12px;
      font-size: 1.1rem;
      border: none;
      border-radius: 8px;
      width: 100%;
      cursor: pointer;
      transition: background 0.3s;
    }

    .submit-btn:hover {
      background: #4CAF50;
    }

    @media(max-width: 1100px) {
      .container {
        flex-direction: column;
        max-width: 98vw;
      }
      .right {
        padding: 32px 8px;
      }
      .photo-grid {
        grid-template-columns: repeat(2, 110px);
      }
    }

    @media(max-width: 700px) {
      .form-row {
        flex-direction: column;
        gap: 16px;
      }
      .form-row .form-group {
        width: 100%;
        margin-bottom: 0;
      }
      #petAge-label {
        display: inline-block;
        width: calc(100% - 10px);
        }

    }

    .custom-breed-input {
      display: none;
      margin-top: 8px;
    }

    .custom-breed-input input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1.5px solid #FF6B35;
      font-size: 1rem;
      transition: 0.3s;
    }

    .custom-breed-input input:focus {
      border-color: #FF6B35;
      outline: none;
    }

    .file-upload-section {
      margin-top: 24px;
    }

    .file-upload-group {
      margin-bottom: 16px;
    }

    .file-upload-label {
      display: block;
      margin-bottom: 8px;
      color: #FF6B35;
      font-weight: 500;
    }

    .file-upload-box {
      border: 2px dashed #FF6B35;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      background: #FFF3E6;
    }

    .file-upload-box:hover {
      background: #FFE3D1;
    }

    .file-upload-box input[type="file"] {
      display: none;
    }

    .file-upload-icon {
      color: #FF6B35;
      font-size: 24px;
      margin-bottom: 8px;
    }

    .file-upload-text {
      color: #666;
      font-size: 0.9rem;
    }

    .file-name {
      margin-top: 8px;
      color: #FF6B35;
      font-size: 0.9rem;
      display: none;
    }

    .file-upload-box.has-file {
      border-style: solid;
    }

    .file-upload-box.has-file .file-name {
      display: block;
    }

    .file-upload-box.has-file .file-upload-text {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="left">
      <img src="/static/images/tasarım1.png" alt="Tasarım" class="design-overlay top-offset" />

      <img src="/static/images/deneme2.png" alt="Hayvan illüstrasyonu" class="pet-illustration" style="width: 100%; padding-top: 50px;"/>
    </div>
    <div class="right">
      <h1>Evcil Hayvan Profilini Oluştur</h1>
    <form action="/add-pet/" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      
      <!-- Adı -->
      <div class="form-group">
        <label for="petName">Adı</label>
        <input type="text" name="petName" id="petName" placeholder="Dostunuzun adı" style="width: 97%;"/>
      </div>

      <div class="form-row">
        <!-- Tür -->
        <div class="form-group">
          <label for="petType">Türü</label>
          <select id="petType" name="petType" onchange="updateBreeds()">
            <option value="">Seçiniz</option>
            <option value="Cats">Kedi</option>
            <option value="Dogs">Köpek</option>
            <option value="Birds">Kuş</option>
            <option value="Hamsters">Kemirgen</option>
            <option value="Others">Diğer</option>
          </select>
        </div>

        <!-- Cins -->
        <div class="form-group">
          <label for="petBreed">Cinsi</label>
          <select id="petBreed" name="petBreed" onchange="handleBreedChange()" disabled>
            <option value="">Önce türü seçin</option>
          </select>
          <div id="customBreedInput" class="custom-breed-input">
            <input type="text" id="otherBreed" placeholder="Cinsini yazın..." style="width: 94%;">
          </div>
        </div>
      </div>

      <!-- Yaş -->
      <div class="form-row">
        <div class="form-group">
            <label for="petAge" id="petAge-label">Yaşı</label>
            <input type="number" name="petAge" id="petAge" placeholder="Yaş" style="width: 94%;"/>
        </div>

        <!-- Cinsiyet -->
        <div class="form-group">
          <label for="petGender">Cinsiyeti</label>
          <select id="petGender" name="petGender">
            <option>Seçiniz</option>
            <option>Erkek</option>
            <option>Dişi</option>
          </select>
        </div>
      </div>

      <!-- Kısırlaştırma -->
      <div class="form-group">
        <label for="sterilizationStatus">Kısırlaştırma Durumu</label>
        <select id="sterilizationStatus" name="sterilizationStatus">
          <option value="">Seçiniz</option>
          <option value="sterilized">Kısırlaştırıldı</option>
          <option value="not_sterilized">Kısırlaştırılmadı</option>
          <option value="unknown">Bilinmiyor</option>
        </select>
      </div>

      <!-- Açıklama -->
      <div class="form-group">
        <label for="petDesc">Açıklama</label>
        <textarea id="petDesc" name="petDesc" rows="3" placeholder="Kısa bir açıklama..." style="font-family: inherit; width: 97%;"></textarea>
      </div>

      <!-- Adres -->
      <div class="form-group">
        <label for="petAddress">Adres</label>
        <textarea id="petAddress" name="petAddress" rows="2" placeholder="Evcil hayvanın konumunu belirtin..." style="font-family: inherit; width: 97%;"></textarea>
      </div>
      

      <!-- Aşı Karnesi -->
      <div class="file-upload-section">
        <div class="file-upload-group">
          <label class="file-upload-label">Aşı Karnesi</label>
          <label class="file-upload-box" id="vaccinationCardBox">
            <input type="file" id="vaccinationCard" name="vaccination_card" accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileUpload(this, 'vaccinationCardBox')">
            <div class="file-upload-icon">
              <i class="fas fa-file-medical"></i>
            </div>
            <div class="file-upload-text">
              Aşı karnesini yüklemek için tıklayın<br>
              <small>(PDF, JPG, PNG)</small>
            </div>
            <div class="file-name"></div>
          </label>
        </div>

        <!-- Veteriner Raporu -->
        <div class="file-upload-group">
          <label class="file-upload-label">Veteriner Raporu</label>
          <label class="file-upload-box" id="vetReportBox">
            <input type="file" id="vetReport" name="vet_report" accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileUpload(this, 'vetReportBox')">
            <div class="file-upload-icon">
              <i class="fas fa-file-medical-alt"></i>
            </div>
            <div class="file-upload-text">
              Veteriner raporunu yüklemek için tıklayın<br>
              <small>(PDF, JPG, PNG)</small>
            </div>
            <div class="file-name"></div>
          </label>
        </div>
      </div>

      <!-- İlgi Alanları -->
      <div class="form-group">
        <label>İlgi Alanları</label>
        <div class="interests">
          <span class="interest" onclick="toggleInterest(this)">Top</span>
          <span class="interest" onclick="toggleInterest(this)">Tüy Oyuncağı</span>
          <span class="interest" onclick="toggleInterest(this)">Koşmak</span>
          <span class="interest" onclick="toggleInterest(this)">Kucak</span>
          <span class="interest" onclick="toggleInterest(this)">Yüzmek</span>
          <span class="interest" onclick="toggleInterest(this)">Kedi Otu</span>
        </div>
        <div class="custom-interest">
          <input type="text" id="newInterest" placeholder="Yeni ilgi alanı ekle...">
          <button type="button" onclick="addCustomInterest()">Ekle</button>
        </div>

        <!-- Gizli alan -->
        <input type="hidden" name="ownerEmail" value="{{ user_email }}">
        <input type="hidden" name="interests" id="interestsInput">
      </div>

      <!-- Fotoğraf Ekleme -->
      <div class="photo-upload-section">
        <label style="color:#FF6B35;font-weight:600;">Profil Fotoğrafları</label>
        <div class="photo-grid" id="photoGrid">
          <label class="photo-slot">
            <input type="file" name="photos" accept="image/*" onchange="handlePhoto(event,0)">
            <span class="add-photo-btn"><i class="fas fa-plus"></i></span>
          </label>
          <label class="photo-slot">
            <input type="file" name="photos" accept="image/*" onchange="handlePhoto(event,1)">
            <span class="add-photo-btn"><i class="fas fa-plus"></i></span>
          </label>
          <label class="photo-slot">
            <input type="file" name="photos" accept="image/*" onchange="handlePhoto(event,2)">
            <span class="add-photo-btn"><i class="fas fa-plus"></i></span>
          </label>
          <label class="photo-slot">
            <input type="file" name="photos" accept="image/*" onchange="handlePhoto(event,3)">
            <span class="add-photo-btn"><i class="fas fa-plus"></i></span>
          </label>
        </div>
        <p class="photo-info">En az 1, en fazla 4 fotoğraf yükleyin.</p>
      </div>

      <button type="submit" class="submit-btn">Devam</button>
</form>
    </div>
  </div>

  <script>
    // Fotoğraf yükleme ve gösterme
    const photoGrid = document.getElementById('photoGrid');

    // Tür ve cins ilişkisi
    const breedOptions = {
      'Cats': [
        'British Shorthair',
        'Scottish Fold',
        'İran Kedisi',
        'Van Kedisi',
        'Maine Coon',
        'Siyam',
        'Bengal',
        'Sphynx',
        'Ragdoll',
        'Diğer'
      ],
      'Dogs': [
        'Golden Retriever',
        'Labrador',
        'Pomeranian',
        'Poodle',
        'Chihuahua',
        'Beagle',
        'Cocker Spaniel',
        'Doberman',
          'Shih Tzu',
        'Diğer'
      ],
      'Birds': [
        'Muhabbet Kuşu',
        'Sultan Papağanı',
        'Kanarya',
        'Cennet Papağanı',
        'Zebra İspinozu',
        'Macaw',
        'Afrika Gri Papağanı',
        'Diğer'
      ],
      'Hamsters': [
        'Syrian Hamster',
        'Winter White',
        'Roborovski',
        'Campbell Dwarf',
        'Chinese Hamster',
        'Diğer'
      ],
      'Others': ['Belirtilmedi']
    };

    function updateBreeds() {
      const petType = document.getElementById('petType').value;
      const breedSelect = document.getElementById('petBreed');
      const customBreedInput = document.getElementById('customBreedInput');
      
      // Önceki seçenekleri temizle
      breedSelect.innerHTML = '';
      customBreedInput.style.display = 'none';
      
      if (petType && breedOptions[petType]) {
        // Cins seçimini aktif et
        breedSelect.disabled = false;
        
        // Yeni seçenekleri ekle
        breedOptions[petType].forEach(breed => {
          const option = document.createElement('option');
          option.value = breed;
          option.textContent = breed;
          breedSelect.appendChild(option);
        });
      } else {
        // Tür seçilmediğinde veya geçersiz tür seçildiğinde
        breedSelect.disabled = true;
        const option = document.createElement('option');
        option.value = '';
        option.textContent = 'Önce türü seçin';
        breedSelect.appendChild(option);
      }
    }

    function handleBreedChange() {
      const breedSelect = document.getElementById('petBreed');
      const customBreedInput = document.getElementById('customBreedInput');
      
      if (breedSelect.value === 'Diğer') {
        customBreedInput.style.display = 'block';
      } else {
        customBreedInput.style.display = 'none';
      }
    }

    function handlePhoto(event, idx) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        const slot = photoGrid.children[idx];
        let img = slot.querySelector('img');
        if (!img) {
          img = document.createElement('img');
          slot.appendChild(img);
          slot.querySelector('.add-photo-btn').style.display = 'none';
        }
        img.src = e.target.result;
        // Silme butonunu ekle
        let removeBtn = slot.querySelector('.remove-photo-btn');
        if (!removeBtn) {
          removeBtn = document.createElement('button');
          removeBtn.className = 'remove-photo-btn';
          removeBtn.innerHTML = '<i class="fas fa-times"></i>';
          removeBtn.onclick = function(ev) {
            ev.stopPropagation();
            img.remove();
            removeBtn.remove();
            slot.querySelector('.add-photo-btn').style.display = '';
            slot.querySelector('input[type="file"]').value = '';
          };
          slot.appendChild(removeBtn);
        }
        removeBtn.style.display = '';
      };
      reader.readAsDataURL(file);
    }
  </script>

  <script>
    // İlgi alanı seçme fonksiyonu
    function toggleInterest(element) {
      element.classList.toggle('selected');
    }

    // Özel ilgi alanı ekleme fonksiyonu
    function addCustomInterest() {
      const input = document.getElementById('newInterest');
      const value = input.value.trim();
      
      if (value) {
        const interests = document.querySelector('.interests');
        const newInterest = document.createElement('span');
        newInterest.className = 'interest';
        newInterest.textContent = value;
        newInterest.onclick = function() { toggleInterest(this); };
        interests.appendChild(newInterest);
        input.value = '';
      }
    }

    // Enter tuşu ile özel ilgi alanı ekleme
    document.getElementById('newInterest').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        addCustomInterest();
      }
    });
  </script>

  <script>
    function handleFileUpload(input, boxId) {
      const box = document.getElementById(boxId);
      const fileName = input.files[0]?.name;
      
      if (fileName) {
        box.classList.add('has-file');
        box.querySelector('.file-name').textContent = fileName;
      } else {
        box.classList.remove('has-file');
        box.querySelector('.file-name').textContent = '';
      }
    }
  </script>

  <script>
    document.querySelector('form').addEventListener('submit', function (e) {
      const selected = Array.from(document.querySelectorAll('.interest.selected')).map(el => el.textContent);
      document.getElementById('interestsInput').value = JSON.stringify(selected);
    });
  </script>

</body>
</html>
